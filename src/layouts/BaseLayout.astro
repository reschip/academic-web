---
// Base layout for all pages
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';

export interface Props {
    title?: string;
    description?: string;
}

const { title = "Andrés Cruz Chipol | CINVESTAV Academic Page", description = "Master's Student in Computer Science at CINVESTAV. Academic portfolio and coursework assignments." } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href={`${Astro.site}web-app-manifest-192x192.png`} />
        <link rel="apple-touch-icon" href={`${Astro.site}web-app-manifest-192x192.png`} />
        <link rel="shortcut icon" href={`${Astro.site}web-app-manifest-192x192.png`} />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
        <meta name="description" content={description} />
        <meta name="keywords" content="Andrés Cruz Chipol, CINVESTAV, Computer Science, AI, Machine Learning, Computer Vision, Master's Student, Academic Portfolio" />
        <meta name="theme-color" content="#1e3a8a" />
        
        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={Astro.url} />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content="/image-about.jpeg" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta property="og:image:alt" content="Andrés Cruz Chipol - CINVESTAV Student" />
        <meta property="og:site_name" content="Andrés Cruz Chipol" />
        <meta property="og:locale" content="en_US" />
        
        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content={Astro.url} />
        <meta property="twitter:title" content={title} />
        <meta property="twitter:description" content={description} />
        <meta property="twitter:image" content="/image-about.jpeg" />
        <meta property="twitter:image:alt" content="Andrés Cruz Chipol - CINVESTAV Student" />
        <meta property="twitter:creator" content="@reschip" />
        
        <!-- Additional SEO -->
        <meta name="author" content="Andrés Cruz Chipol" />
        <meta name="robots" content="index, follow" />
        <link rel="canonical" href={Astro.url} />
        
        <!-- Structured Data -->
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Person",
            "name": "Andrés Cruz Chipol",
            "jobTitle": "Master's Student in Computer Science",
            "worksFor": {
                "@type": "Organization",
                "name": "CINVESTAV",
                "url": "https://www.cinvestav.mx"
            },
            "alumniOf": "CINVESTAV",
            "url": "https://www.andreschipol.com",
            "sameAs": [
                "https://github.com/reschip",
                "https://www.linkedin.com/in/andreschipol/",
                "https://x.com/reschip"
            ]
        }
        </script>
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    </head>
    <body>
        <Header />
        <main role="main">
            <slot />
        </main>
        <Footer />
        
        <script>
            // Theme toggle functionality
            function initTheme() {
                const themeToggle = document.querySelector('.theme-toggle');
                const body = document.body;

                if (!themeToggle) return;

                themeToggle.addEventListener('click', () => {
                    body.classList.toggle('dark-mode');
                    
                    // Add smooth transition
                    body.style.transition = 'background-color 0.3s ease, color 0.3s ease';
                    
                    // Force update of code blocks
                    updateCodeBlocks();
                    
                    // Store preference
                    const isDark = body.classList.contains('dark-mode');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                });

                // Load saved theme
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    body.classList.add('dark-mode');
                }
            }

            // Function to update code blocks theme
            function updateCodeBlocks() {
                const codeBlocks = document.querySelectorAll('pre, code, .expressive-code');
                codeBlocks.forEach(block => {
                    // Force re-render by toggling a class
                    block.style.transition = 'background-color 0.3s ease, color 0.3s ease';
                });
            }

            // Initialize theme when DOM is loaded
            document.addEventListener('DOMContentLoaded', initTheme);
        </script>
    </body>
</html>
